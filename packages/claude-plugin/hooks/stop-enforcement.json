{
  "trigger": "Stop",
  "hooks": [
    {
      "type": "prompt",
      "prompt": "Check if the assistant made code changes in this session. If no code changes were made, approve stopping.\n\nIf code changes were made:\n1. Check if `.claude/codewalk.local.md` exists and parse its YAML frontmatter for settings\n2. Use defaults if no settings file: storage=local, autoCommit=true, globalDir=~/.codewalk\n\nVerify based on storage mode:\n- **local + autoCommit:true**: Code was committed AND tracking file is included in the commit (verify with `git show --name-only HEAD | grep .codewalk/`)\n- **local + autoCommit:false**: Code was committed AND tracking file exists at `.codewalk/<hash>.json` (should be untracked)\n- **global**: Code was committed AND tracking file exists at `<globalDir>/<repo-name>/<hash>.json`\n\nIf verification fails, block stopping and instruct to complete the codewalk workflow. If all verifications pass, approve stopping.",
      "timeout": 60
    }
  ]
}
