{
  "hooks": {
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Check if there are any uncommitted code changes (use `git status --porcelain`). Also check if the last code commit has a corresponding tracking file.\n\nIf there are uncommitted code changes OR the last code commit lacks a tracking file:\n1. Read `.claude/codewalk.local.md` if it exists and parse its YAML frontmatter for settings. Use defaults if no settings file: storage=local, autoCommit=true, globalDir=~/.codewalk\n2. Complete the codewalk workflow:\n   - If uncommitted changes exist: commit them with a descriptive message (`git add -A && git commit -m \"descriptive message\"`)\n   - Get the commit hash: `git rev-parse --short HEAD`\n   - Create the tracking file following the SKILL.md schema with reasoning explaining WHY each change was made\n   - For local+autoCommit:true: commit the tracking file separately\n   - For local+autoCommit:false: leave tracking file untracked\n   - For global: save to <globalDir>/<repo-name>/<hash>.json\n3. Validate the JSON file\n\nAfter completing the workflow (or if no code changes were made), approve stopping.",
            "timeout": 120
          }
        ]
      }
    ]
  }
}
