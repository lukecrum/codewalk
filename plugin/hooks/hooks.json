{
  "hooks": {
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Check if there are uncommitted changes by looking at the transcript for file edits or code changes that weren't followed by a git commit.\n\nIf uncommitted changes exist: respond with {\"decision\": \"block\", \"reason\": \"Uncommitted changes detected. Run: git add -A && git commit -m 'descriptive message', then create the codewalk tracking file per the codewalk workflow.\"}\n\nIf changes were committed, check for the tracking file. First check if .claude/codewalk.local.md exists - if so, parse its YAML frontmatter for storage setting (local or global) and globalDir. Use defaults if no config: storage=local, globalDir=~/.codewalk.\n\nFor storage=local: check .codewalk/<hash>.json\nFor storage=global: check <globalDir>/<repo-name>/<hash>.json\n\nIf tracking file is missing: respond with {\"decision\": \"block\", \"reason\": \"Missing tracking file. Create the codewalk tracking file per the codewalk workflow.\"}\n\nIf everything is complete (clean working directory AND tracking file exists), respond with {\"decision\": \"approve\"}",
            "timeout": 120
          }
        ]
      }
    ]
  }
}
